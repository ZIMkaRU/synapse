Implement "room knocking" as per MSC2403. Contributed by Sorunome and anoa.